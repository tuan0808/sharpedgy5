<!-- login.component.html -->
<div class="page-wrapper">
    <div class="auth-bg">
        <div class="authentication-box">
            <div class="text-center">
                <img src="assets/images/logo.png" alt="Logo" />
                <h4 class="mt-4">LOGIN Test</h4>

                @if(loginError()){
                    <div class="alert alert-danger mt-3">{{ loginError() }}</div>
                }
            </div>

            <div class="card mt-4">
                <div class="card-body">
                    <form method="post" [formGroup]="loginForm" (ngSubmit)="login()" autocomplete="on" name="loginForm">
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input
                                    id="email"
                                    name="email"
                                    type="email"
                                    class="form-control"
                                    formControlName="email"
                                    autocomplete="username"
                                    [class.is-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
                            />
                            @if(loginForm.get('email')?.errors?.['required'] && loginForm.get('email')?.touched){
                                <div class="invalid-feedback">Email is required</div>
                            }
                            @if(loginForm.get('email')?.errors?.['email'] && loginForm.get('email')?.touched){
                                <div class="invalid-feedback">Please enter a valid email</div>
                            }
                        </div>

                        <div class="form-group">
                            <label for="password">Password</label>
                            <input
                                    id="password"
                                    name="password"
                                    type="password"
                                    class="form-control"
                                    formControlName="password"
                                    autocomplete="current-password"
                                    [class.is-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
                            />
                            @if(loginForm.get('password')?.errors?.['required'] && loginForm.get('password')?.touched){
                                <div class="invalid-feedback">Password is required</div>
                            }
                            @if(loginForm.get('password')?.errors?.['minlength'] && loginForm.get('password')?.touched){
                                <div class="invalid-feedback">Password must be at least 6 characters</div>
                            }
                        </div>

                        <div class="form-group">
                            <button
                                    type="submit"
                                    class="btn btn-primary w-100"
                                    [disabled]="loginForm.invalid || isLoading()">
                                @if(isLoading()){
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                }
                                Login
                            </button>
                        </div>

                        <div class="text-center mt-4">
                            <p>Or login with</p>
                            <button
                                    type="button"
                                    class="btn btn-outline-primary"
                                    (click)="googleLogin()"
                                    [disabled]="isLoading()"
                            >
                                <i class="fa fa-google me-2"></i>Google
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
