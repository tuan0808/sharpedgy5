<div class="gridster-wrapper">
    <div class="dashboard-header d-flex justify-content-between align-items-center p-3">
        <h1>Dashboard</h1>
        <div class="btn-group">
            <button
                    class="btn"
                    [class.btn-primary]="canUndo()"
                    [class.btn-secondary]="!canUndo()"
                    [disabled]="!canUndo()"
                    (click)="undo()"
                    [title]="canUndo() ? 'Undo last action' : 'No more actions to undo'">
                <i class="icofont icofont-undo" [class.text-muted]="!canUndo()"></i>
            </button>
            <button
                    class="btn"
                    [class.btn-primary]="canRedo()"
                    [class.btn-secondary]="!canRedo()"
                    [disabled]="!canRedo()"
                    (click)="redo()"
                    [title]="canRedo() ? 'Redo last action' : 'No more actions to redo'">
                <i class="icofont icofont-redo" [class.text-muted]="!canRedo()"></i>
            </button>
        </div>
        <div class="btn-group">
            <button class="btn btn-primary" (click)="onSave()">
                <i class="icofont icofont-save"></i>
            </button>
            <button class="btn btn-secondary" (click)="toggleGrid()">
                <i class="icofont icofont-grid-advance"></i>
            </button>
            <button class="btn btn-primary" (click)="openPopupGrid()">
                <i class="icofont icofont-external-link"></i>
            </button>
            <button class="btn btn-danger">
                <i class="icofont icofont-ui-delete"></i>
            </button>
        </div>
    </div>

    @if (!popupWindow) {
        <div class="gridster-container">
            <gridster [options]="options"
                      (dragover)="$event.preventDefault()"
                      (drop)="onDrop($event)">
            >
                <gridster-item [item]="item" *ngFor="let item of gridItems">
                    <ng-template appDynamicComponent></ng-template>
                </gridster-item>
            </gridster>
        </div>
    } @else {
        <div class="popup-message p-4 text-center">
            <div class="alert alert-info">
                Dashboard is currently open in another window
            </div>
        </div>
    }
</div>
