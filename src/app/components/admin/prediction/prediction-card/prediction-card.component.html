<div class="game-header">
    <div class="game-info" (click)="toggleAccordion(game().id)">
        <span class="game-date">{{ formatDate(game().scheduled) }}</span>
        <span class="game-teams">{{ game().homeTeam.name }} vs {{ game().awayTeam.name }}</span>
        <span class="game-status">{{ game().status }}</span>
    </div>
    <div class="game-actions">
        <!-- Place Bet Icon -->
        <button class="action-icon place-bet-icon"
                [class.disabled]="!isGameBetPlaceable"
                [disabled]="!isGameBetPlaceable"
                aria-label="Place Bet"
                (click)="onSubmit()">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
        </button>


        <!-- View Matchup Icon -->
        <button class="action-icon view-matchup-icon" aria-label="View Matchup" (click)="viewMatchup(game().id, $event)">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
            </svg>
        </button>

        <!-- Edit Icon -->
        <button class="action-icon edit-icon" aria-label="Edit" (click)="editGame(game().id, $event)">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
        </button>

        <!-- Expand/Collapse Icon -->
        <button class="action-icon expand-icon" (click)="toggleAccordion(game().id)" aria-label="Expand or Collapse">
            <svg
                    width="20"
                    height="20"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                    [class.rotated]="expandedGame === game().id"
            >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
        </button>
    </div>
</div>
@if (expandedGame === game().id) {
    <div class="game-content">
        <div class="content-grid">
            <!-- Left side: Betting info -->
            <div class="betting-info">
                <div class="betting-grid">
                    <p class="label">Spread:</p>
                    <p class="value">{{ game().spread.toFixed(2) }}</p>

                    <p class="label">Money Line:</p>
                    <p class="value">{{ game().homeTeam.abbreviation }} {{ game().moneylineHome }} | {{ game().awayTeam.abbreviation }} {{ game().moneylineAway }}</p>

                    <p class="label">O/U:</p>
                    <p class="value">{{ game().overUnder.toFixed(1) }}</p>
                </div>

                <div class="matchup-analysis">
                    <p class="analysis-text">
                        -
                    </p>
                </div>
            </div>

            <!-- Right side: Bet Results -->
            <div class="bet-results">
                <h3 class="bet-results-title">Bet Results</h3>
                <div class="bet-results-grid">
                    <p class="label">Bet Type:</p>
                    <p class="value">{{game().betSettlement.betType}}</p>

                    <p class="label">Bet Amount:</p>
                    @if ( game().betSettlement.wagerAmount) {
                        <p class="value">${{ game().betSettlement.wagerAmount.toFixed(2) }}</p>
                    }
                    @else {
                        <p class="value">$0.00</p>
                    }
                    <p class="label">Team Selected:</p>
                    @if (game().betSettlement.selectedTeam !== null) {
                        <p class="value">{{game().betSettlement.selectedTeam }}</p>
                    } @else {
                        <p class="value">-</p>
                    }
                </div>
            </div>
        </div>
    </div>
}

