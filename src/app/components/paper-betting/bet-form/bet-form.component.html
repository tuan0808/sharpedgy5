<div class="betting-card">
    <h2>Place Your Bet</h2>

    <div class="layout-container">
        <!-- Left Side - Bet Types -->
        <div class="bet-types">
            <h3>Bet Type</h3>
            <div class="bet-type-list">
                @for (bet of betTypes; track bet.id) {
                    <button
                            type="button"
                            (click)="setSelectedBetType(bet.id)"
                            [class.selected]="selectedBetType === bet.id"
                            class="bet-type-btn">
                        <span class="bet-icon">{{ bet.icon }}</span>
                        <span>{{ bet.label }}</span>
                    </button>
                }
            </div>
        </div>

        <!-- Right Side - Form -->
        <form [formGroup]="bettingForm" (ngSubmit)="onSubmit()" class="bet-form">
            <div class="form-section">
                <label>Select Team</label>
                <div class="team-grid">
                    <!-- Home Team -->
                    <button
                            type="button"
                            (click)="setSelectedTeam({
                            name: game.homeTeam.name,
                            odds: game.moneylineHome,
                            type: 'home'
                        })"
                            [class.selected]="selectedTeam?.type === 'home'"
                            class="team-btn">
                        <div class="team-name">{{ game.homeTeam.name }}</div>
                        <div class="team-odds">
                            {{ game.moneylineHome >= 0 ? '+' : '' }}{{ game.moneylineHome }}
                        </div>
                    </button>
                    <!-- Away Team -->
                    <button
                            type="button"
                            (click)="setSelectedTeam({
                            name: game.awayTeam.name,
                            odds: game.moneylineAway,
                            type: 'away'
                        })"
                            [class.selected]="selectedTeam?.type === 'away'"
                            class="team-btn">
                        <div class="team-name">{{ game.awayTeam.name }}</div>
                        <div class="team-odds">
                            {{ game.moneylineAway >= 0 ? '+' : '' }}{{ game.moneylineAway }}
                        </div>
                    </button>
                </div>
            </div>

            <div class="form-section">
                <label for="betAmount">Bet Amount ($)</label>
                <div class="amount-input">
                    <span class="dollar-sign">$</span>
                    <input
                            id="betAmount"
                            type="number"
                            formControlName="amount"
                            placeholder="Enter amount"
                            (input)="updatePotentialWinnings()">
                </div>
                @if (bettingForm.get('amount')?.errors?.['max']) {
                    <div class="error-message">Maximum bet amount is $5000</div>
                }
                @if (bettingForm.get('amount')?.errors?.['min']) {
                    <div class="error-message">Minimum bet amount is $0</div>
                }
            </div>

            <!-- Potential Winnings Display -->
            @if (potentialWinnings > 0) {
                <div class="potential-winnings">
                    <div class="winnings-info">
                        <span>Potential Winnings:</span>
                        <span class="amount">${{ potentialWinnings.toFixed(2) }}</span>
                    </div>
                </div>
            }

            <button
                    type="submit"
                    class="place-bet-btn"
                    [disabled]="!isFormValid()">
                Place Bet
            </button>
        </form>
    </div>
</div>
