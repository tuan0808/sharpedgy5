<div class="p-6 bg-gray-50">
    <!-- Header with Filters -->
    <div class="flex items-center gap-2 mb-4">
        <div class="relative">
            <input
                    type="text"
                    placeholder="Search accounts..."
                    class="pl-3 pr-4 py-2 border rounded-lg w-[200px]"
                    [ngModel]="searchTerm()"
                    (ngModelChange)="onSearchChange($event)"
            />
        </div>
        <select
                class="px-3 py-2 border rounded-lg"
                [ngModel]="filterStatus()"
                (ngModelChange)="onFilterChange($event)"
        >
            <option value="all">All Accounts</option>
        </select>
        <select
                class="px-3 py-2 border rounded-lg"
                [ngModel]="sortOption()"
                (ngModelChange)="onSortChange($event)"
        >
            <option value="newest">Newest First</option>
        </select>
    </div>

    <!-- Account Cards -->
    <div class="space-y-2">
        @for (account of paginatedAccounts(); track account.id) {
            <div class="bg-white rounded-lg shadow-sm p-4">
                <div class="flex justify-between items-start">
                    <div>
                        <div class="flex items-center gap-2">
                            <span class="text-lg font-semibold">Account #{{account.id}}</span>
                            <span [class]="account.activeAccount ? 'bg-green-100 text-green-700 px-2 py-0.5 rounded-md text-sm' : 'bg-gray-100 text-gray-600 px-2 py-0.5 rounded-md text-sm'">
                                {{account.activeAccount ? 'Active' : 'Closed'}}
                            </span>
                            <span class="text-gray-500 text-sm">{{account.betHistory.length}} bets</span>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">
                            Created: {{account.creationDate | date:'M/d/yyyy, h:mm:ss a'}}
                            @if (account.closedDate) {
                                • Closed: {{account.closedDate | date:'M/d/yyyy, h:mm:ss a'}}
                            }
                        </p>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="text-right">
                            <div class="text-xs text-gray-500">Balance</div>
                            <div [class]="'text-sm ' + (account.balance > 0 ? 'text-green-600' : 'text-red-600')">
                                ${{account.balance.toFixed(2)}}
                            </div>
                        </div>
                        <button
                                (click)="toggleAccount(account.user_id)"
                                class="text-gray-400"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between mt-4">
        <select
                class="px-3 py-2 border rounded-lg"
                [ngModel]="pageSize()"
                (ngModelChange)="onPageSizeChange($event)"
        >
            <option value="5">5 per page</option>
        </select>

        <div class="flex items-center gap-2">
            <span class="text-gray-500">«</span>
            <span class="bg-blue-600 text-white px-3 py-1 rounded">1</span>
            <span class="text-gray-500">»</span>
        </div>

        <div class="text-sm text-gray-500">
            Page 1 of 1
        </div>
    </div>
</div>
